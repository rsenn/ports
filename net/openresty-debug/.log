Executing: build
Executing: mv nginx-rtmp-module-1.2.1 openresty-1.13.6.2/nginx-rtmp-module
Executing: mv ngx_brotli-8104036af9cff4b1d34f22d00ba857e2a93a243c openresty-1.13.6.2/nginx-brotli-module
Executing: rm -rf openresty-1.13.6.2/nginx-brotli-module/deps/brotli
Executing: mv brotli-1.0.7 openresty-1.13.6.2/nginx-brotli-module/deps/brotli
Executing: cd openresty-1.13.6.2
Executing: CFLAGS=' -Os'
Executing: grep -rIl '\-O[23]' COPYRIGHT README-windows.txt README.markdown bundle configure nginx-brotli-module nginx-rtmp-module patches util
Executing: xargs sed -i 's, -O[23], -g3 -ggdb -O0, ; s, -fomit-frame-pointer,,g'
Executing: ./configure --prefix=/opt/openresty-debug --with-pcre-jit --with-ipv6 --without-http_redis2_module --with-http_iconv_module --with-luajit=/opt/openresty/luajit --with-mail --with-mail_ssl_module --with-stream --with-stream_ssl_module --with-stream_ssl_preread_module --with-http_iconv_module --with-http_v2_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --add-module=/usr/src/net/openresty-1.13.6.2/nginx-rtmp-module --add-module=/usr/src/net/openresty-1.13.6.2/nginx-brotli-module --with-pcre-jit --with-ipv6 --without-http_redis2_module --with-http_iconv_module --with-debug --with-cc=diet-gcc '--with-cc-opt=-g3 -ggdb -O0' -j8
platform: linux (linux)
cp -rp bundle/ build
cd build
export LUAJIT_LIB='/opt/openresty/luajit/lib'
export LUAJIT_INC='/opt/openresty/luajit/include/luajit-2.1'
patching the resty script with hard-coded nginx binary path...
cd nginx-1.13.6
sh ./configure --prefix=/opt/openresty-debug/nginx \
  --with-debug \
  --with-cc-opt='-DNGX_LUA_USE_ASSERT -DNGX_LUA_ABORT_AT_PANIC -O2 -g3 -ggdb -O0' \
  --add-module=../ngx_devel_kit-0.3.0 \
  --add-module=../iconv-nginx-module-0.14 \
  --add-module=../echo-nginx-module-0.61 \
  --add-module=../xss-nginx-module-0.06 \
  --add-module=../ngx_coolkit-0.2rc3 \
  --add-module=../set-misc-nginx-module-0.32 \
  --add-module=../form-input-nginx-module-0.12 \
  --add-module=../encrypted-session-nginx-module-0.08 \
  --add-module=../srcache-nginx-module-0.31 \
  --add-module=../ngx_lua-0.10.13 \
  --add-module=../ngx_lua_upstream-0.07 \
  --add-module=../headers-more-nginx-module-0.33 \
  --add-module=../array-var-nginx-module-0.05 \
  --add-module=../memc-nginx-module-0.19 \
  --add-module=../redis-nginx-module-0.3.7 \
  --add-module=../rds-json-nginx-module-0.15 \
  --add-module=../rds-csv-nginx-module-0.09 \
  --add-module=../ngx_stream_lua-0.0.5 \
  --with-ld-opt='-Wl,-rpath,/opt/openresty/luajit/lib' \
  --with-pcre-jit --with-ipv6 --with-mail --with-mail_ssl_module --with-stream --with-stream_ssl_module --with-stream_ssl_preread_module --with-http_v2_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --add-module=/usr/src/net/openresty-1.13.6.2/nginx-rtmp-module --add-module=/usr/src/net/openresty-1.13.6.2/nginx-brotli-module --with-pcre-jit --with-ipv6 --with-cc=diet-gcc --with-stream --with-stream_ssl_module --with-http_ssl_module
checking for OS
 + Linux 5.0.0-31-generic x86_64
checking for C compiler ... found
 + using GNU C compiler
checking for --with-ld-opt="-Wl,-rpath,/opt/openresty/luajit/lib" ... found
checking for -Wl,-E switch ... found
checking for gcc builtin atomic operations ... found
checking for C99 variadic macros ... found
checking for gcc variadic macros ... found
checking for gcc builtin 64 bit byteswap ... found
checking for unistd.h ... found
checking for inttypes.h ... found
checking for limits.h ... found
checking for sys/filio.h ... not found
checking for sys/param.h ... found
checking for sys/mount.h ... found
checking for sys/statvfs.h ... found
checking for crypt.h ... not found
checking for Linux specific features
checking for epoll ... found
checking for EPOLLRDHUP ... found
checking for EPOLLEXCLUSIVE ... not found
checking for O_PATH ... found
checking for sendfile() ... found
checking for sendfile64() ... found
checking for sys/prctl.h ... found
checking for prctl(PR_SET_DUMPABLE) ... found
checking for crypt_r() ... not found
checking for sys/vfs.h ... found
checking for nobody group ... not found
checking for nogroup group ... found
checking for poll() ... found
checking for /dev/poll ... not found
checking for kqueue ... not found
checking for crypt() ... found
checking for F_READAHEAD ... not found
checking for posix_fadvise() ... not found
checking for O_DIRECT ... found
checking for F_NOCACHE ... not found
checking for directio() ... not found
checking for statfs() ... found
checking for statvfs() ... found
checking for dlopen() ... not found
checking for dlopen() in libdl ... not found
checking for sched_yield() ... found
checking for sched_setaffinity() ... found
checking for SO_SETFIB ... not found
checking for SO_REUSEPORT ... found
checking for SO_ACCEPTFILTER ... not found
checking for SO_BINDANY ... not found
checking for IP_BIND_ADDRESS_NO_PORT ... not found
checking for IP_TRANSPARENT ... not found
checking for IP_BINDANY ... not found
checking for IP_RECVDSTADDR ... not found
checking for IP_SENDSRCADDR ... not found
checking for IP_PKTINFO ... found
checking for IPV6_RECVPKTINFO ... not found
checking for TCP_DEFER_ACCEPT ... found
checking for TCP_KEEPIDLE ... found
checking for TCP_FASTOPEN ... found
checking for TCP_INFO ... found
checking for accept4() ... found
checking for eventfd() ... found
checking for int size ... 4 bytes
checking for long size ... 8 bytes
checking for long long size ... 8 bytes
checking for void * size ... 8 bytes
checking for uint32_t ... found
checking for uint64_t ... found
checking for sig_atomic_t ... found
checking for sig_atomic_t size ... 4 bytes
checking for socklen_t ... found
checking for in_addr_t ... found
checking for in_port_t ... found
checking for rlim_t ... found
checking for uintptr_t ... uintptr_t found
checking for system byte ordering ... little endian
checking for size_t size ... 8 bytes
checking for off_t size ... 8 bytes
checking for time_t size ... 8 bytes
checking for AF_INET6 ... found
checking for setproctitle() ... not found
checking for pread() ... found
checking for pwrite() ... found
checking for pwritev() ... found
checking for sys_nerr ... not found
checking for _sys_nerr ... not found
checking for maximum errno ... found
checking for localtime_r() ... found
checking for posix_memalign() ... not found
checking for memalign() ... not found
checking for mmap(MAP_ANON|MAP_SHARED) ... found
checking for mmap("/dev/zero", MAP_SHARED) ... found
checking for System V shared memory ... found
checking for POSIX semaphores ... not found
checking for POSIX semaphores in libpthread ... found but is not working
checking for POSIX semaphores in librt ... not found
checking for struct msghdr.msg_control ... found
checking for ioctl(FIONBIO) ... found
checking for struct tm.tm_gmtoff ... found
checking for struct dirent.d_namlen ... not found
checking for struct dirent.d_type ... found
checking for sysconf(_SC_NPROCESSORS_ONLN) ... found
checking for openat(), fstatat() ... found
checking for getaddrinfo() ... found
checking for SOCK_CLOEXEC support ... found
checking for FD_CLOEXEC support ... found
configuring additional modules
adding module in ../ngx_devel_kit-0.3.0
 + ngx_devel_kit was configured
adding module in ../iconv-nginx-module-0.14
found ngx_devel_kit for ngx_iconv; looks good.
checking for libiconv ... found
 + ngx_http_iconv_module was configured
adding module in ../echo-nginx-module-0.61
 + ngx_http_echo_module was configured
adding module in ../xss-nginx-module-0.06
 + ngx_http_xss_filter_module was configured
adding module in ../ngx_coolkit-0.2rc3
 + ngx_coolkit_module was configured
adding module in ../set-misc-nginx-module-0.32
found ngx_devel_kit for ngx_set_misc; looks good.
 + ngx_http_set_misc_module was configured
adding module in ../form-input-nginx-module-0.12
found ngx_devel_kit for ngx_form_input; looks good.
 + ngx_http_form_input_module was configured
adding module in ../encrypted-session-nginx-module-0.08
found ngx_devel_kit for ngx_encrypted_session; looks good.
 + ngx_http_encrypted_session_module was configured
adding module in ../srcache-nginx-module-0.31
 + ngx_http_srcache_filter_module was configured
adding module in ../ngx_lua-0.10.13
checking for LuaJIT library in /opt/openresty/luajit/lib and /opt/openresty/luajit/include/luajit-2.1 (specified by the LUAJIT_LIB and LUAJIT_INC env, with -ldl) ... not found
checking for LuaJIT library in /opt/openresty/luajit/lib and /opt/openresty/luajit/include/luajit-2.1 (specified by the LUAJIT_LIB and LUAJIT_INC env) ... not found
        ./configure: error: ngx_http_lua_module requires the Lua or LuaJIT library and LUAJIT_LIB is defined as /opt/openresty/luajit/lib and LUAJIT_INC (path for lua.h) /opt/openresty/luajit/include/luajit-2.1, but we cannot find LuaJIT there.
ERROR: failed to run command: sh ./configure --prefix=/opt/openresty-debug/nginx \...
